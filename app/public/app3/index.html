<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyancard - パック開封</title>
    <style>
        body { margin: 0; padding: 0; background: #fafafa; font-family: 'Arial', sans-serif; color: #1f2937; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; overflow: hidden; }
        #app { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        h1 { margin-bottom: 20px; font-size: 2.2rem; color: #111827; letter-spacing: 0.2px; }
        .link-collection { display: inline-block; margin-bottom: 16px; font-size: 0.95rem; color: #2563eb; text-decoration: none; border: 1px solid #bfdbfe; background: #eff6ff; padding: 6px 10px; border-radius: 9999px; transition: background .2s ease, transform .1s ease; }
        .link-collection:hover { background: #dbeafe; transform: translateY(-1px); }
        .pack-container { position: relative; width: 300px; height: 400px; cursor: pointer; transition: transform 0.3s ease; }
        .pack-container:hover { transform: scale(1.05); }
        .pack-image { width: 100%; height: 100%; background: linear-gradient(180deg, #ffffff 0%, #f7f7f9 100%); border-radius: 14px; border: 1px solid #e5e7eb; box-shadow: 0 12px 28px rgba(0,0,0,0.08); display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; }
        .pack-title { font-size: 1.4rem; font-weight: 700; color: #111827; margin-bottom: 10px; }
        .cat-silhouette { font-size: 4rem; margin: 20px 0; }
        .tap-instruction { margin-top: 20px; font-size: 1rem; color: #6b7280; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }
        /* Pokemon V 風タイトル */
        .title-v { position: relative; display: inline-flex; align-items: center; gap: 10px; font-weight: 900; letter-spacing: .5px; transform: skewX(-8deg); }
        .title-v-text { position: relative; display: inline-block; padding: 6px 10px; background: linear-gradient(180deg, #fff7b1 0%, #ffd34d 40%, #ff9f1c 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 1px 1px 0 #0b1220, -1px 1px 0 #0b1220, 1px -1px 0 #0b1220, -1px -1px 0 #0b1220, 0 6px 12px rgba(0,0,0,.25); }
        .title-v-text::after { content: ''; position: absolute; top: -15%; left: -20%; width: 28%; height: 130%; background: linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.65) 45%, rgba(255,255,255,0) 60%); transform: translateX(-120%) skewX(-10deg); animation: titleSheen 3.5s linear infinite 1.2s; pointer-events: none; mix-blend-mode: screen; }
        .title-v-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; background: linear-gradient(180deg, #c7ccd5 0%, #9aa4b2 60%, #6b7280 100%); color: #0b1220; border: 2px solid #0b1220; box-shadow: 0 4px 0 #0b1220, 0 10px 14px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.9); line-height: 1; transform: skewX(-6deg) translateY(2px); text-shadow: 0 1px 0 rgba(255,255,255,.6); font-weight: 900; }
        @keyframes titleSheen { 0% { transform: translateX(-120%) skewX(-10deg); } 100% { transform: translateX(220%) skewX(-10deg); } }
        /* カード見た目は card.css（ビルド後は /assets/app3.css にバンドル）に集約。ここでは表示制御のみ */
        .card { position: absolute; opacity: 0; display: none; }
        .reset-button { position: absolute; bottom: 30px; right: 30px; padding: 10px 18px; background: #111827; border: none; border-radius: 9999px; color: #fff; cursor: pointer; font-size: 0.95rem; transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease; box-shadow: 0 6px 16px rgba(0,0,0,0.12); display: none; }
        .reset-button:hover { background: #0b1220; transform: translateY(-1px); box-shadow: 0 8px 20px rgba(0,0,0,0.16); }
    </style>
</head>
<body>
    <div id="app">
        <h1 class="title-v"><span class="title-v-text">Nyancard</span><span class="title-v-badge">V</span></h1>
        <a class="link-collection" href="/app3/collection/index.html">コレクションを見る</a>
        <div class="pack-container" id="packContainer">
            <div class="pack-image">
                <div class="pack-title">ねこカードパック</div>
                <div class="cat-silhouette">🐱</div>
                <div class="tap-instruction">タップして開封！</div>
            </div>
        </div>
        
        <div class="card" id="card">
            <div class="card-name" id="cardName"><span class="name-text"></span><span class="name-badge">Trainer Gallery</span></div>
            <div class="card-image" id="cardImage"></div>
            <div class="card-vignette" aria-hidden="true"></div>
            <div class="card-effects" aria-hidden="true"></div>
            <div class="card-rarity" id="cardRarity"></div>
        </div>
        
        <div class="reset-button" id="resetButton">もう一度開封</div>
    </div>

    <script type="module">
      (async () => {
        // まず開発用エントリ（/src/...）を試し、失敗したら本番ビルド（/assets/...）へフォールバック
        try {
          await import('/src/app3/main.ts');
        } catch (e1) {
          try {
            await import('/assets/app3.js');
          } catch (e2) {
            console.error('Nyancardスクリプトの読み込みに失敗しました', e1, e2);
          }
        }
      })();
    </script>
</body>
</html>
